PATH=$PATH:~/drush/:~/opt/fasd/:~/bin
EDITOR=emacsclient
SUDO_EDITOR=emacsclient
export GTAGSCONF=/usr/local/share/gtags/gtags.conf


if [ "$TERM" != "dumb" ]; then
    [ -e "$HOME/.dircolors" ] && DIR_COLORS="$HOME/.dircolors"
    [ -e "$DIR_COLORS" ] || DIR_COLORS=""
    eval "`dircolors -b $DIR_COLORS`"
fi


GRC=$(which grc)
if [ "$TERM" != dumb ] && [ -n GRC ]
then
    alias colourify="$GRC -es --colour=auto"
    alias configure='colourify ./configure'
    alias diff='colourify diff'
    alias make='colourify make'
    alias gcc='colourify gcc'
    alias g++='colourify g++'
    alias as='colourify as'
    alias gas='colourify gas'
    alias ld='colourify ld'
    alias netstat='colourify netstat'
    alias ping='colourify ping'
    alias traceroute6='colourify /usr/bin/traceroute6'
    alias ps='colourify ps'
    alias curl='colourify curl'
    alias hexdump='colourify hexdump'
fi
# At least bash/zsh.
ensure_dir(){
# extract everything before / from $1.
dir="${1%/*}"
if [ -n "$dir" ] && [ "$dir" != "$1" ]
then
mkdir -p $dir
fi
}

create_and_edit() {
ensure_dir $1
emacsclient -n $1
}
alias e=create_and_edit

# Works in bash and zsh, makes mv/cp automatically create dirs if missing.
mkdir_copy_or_move() {
destination="${@: -1}"
ensure_dir $destination
"$@"
}
alias mv='mkdir_copy_or_move mv'
alias cp='mkdir_copy_or_move cp'

pretty_print_json() {
cat $1 | python -mjson.tool | pygmentize -l javascript | less
}
alias ppj=pretty_print_json

mosh_root() {
    mosh root@"$*"
}
alias rs=mosh_root

# From http://unix.stackexchange.com/questions/6463/find-searching-in-parent-directories-instead-of-subdirectories
find-up() {
  path=$(pwd)
  while [[ "$path" != "" && ! -e "$path/$1" ]]; do
    path=${path%/*}
  done
  echo "$path/"
}

ansible_vagrant_run() {
# Some of this may not be needed.
ANSIBLE_SSH_ARGS='-o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o IdentityFile=/home/anttis/.vagrant.d/insecure_private_key'
ANSIBLE_HOST_KEY_CHECKING=false
vagrant_top=$(find-up Vagrantfile)
playbook=$(grep 'ansible.playbook' ${vagrant_top}Vagrantfile | sed -e 's/^.*"\(.*\)".*$/\1/')
ansible-playbook -i ${vagrant_top}inventory  -s --u vagrant $playbook --ask-vault-pass --private-key=/home/anttis/.vagrant.d/insecure_private_key -l "$@"
}

alias va=ansible_vagrant_run
alias os=mosh
alias vs='vagrant ssh'
alias vp='vagrant provision'
alias vu='vagrant up'
alias vd='vagrant destroy'
alias vr='vagrant reload'
alias vh='vagrant halt'

alias dud='du --max-depth=1 -h'
alias duf='du -sh *'
alias fd='find . -type d -name'
alias ff='find . -type f -name'


alias grep="grep --color=always"
alias ls="ls --color=always"
alias less="less -R"

alias t='tail -f'

# ls, the common ones I use a lot shortened for rapid fire usage
alias ls='ls --color'
alias ll='ls -l'

eval "$(fasd --init auto)"
alias c='fasd_cd -d'
# `-d` option present for bash completion
# function fasd_cd is defined in posix-alias

# search for commands
alias cnf=/usr/lib/command-not-found
alias g='/usr/bin/ag -i'

php_drupalcs(){
phpcs --standard=Drupal --extensions=php,module,inc,install,test,profile,theme $1
}
alias pcd=php_drupalcs

# asdz all probably not needed from fasd and free to reuse, f is useful.
source /etc/profile.d/ansible.sh
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*

# Add rvm gems to the path
#export PATH=$PATH:~/.gem/ruby/1.8/bin

# Load scm_breeze
[ -s "$HOME/opt/scm_breeze/scm_breeze.sh" ] && source "$HOME/opt/scm_breeze/scm_breeze.sh"

# Alias for gitjk
alias gitjk="history 10 | tail -r | gitjk_cmd"

# Alias for faster work with ansible
alias an="ansible-playbook -D  -i production site.yml --tags=$1 -l $2 --ask-vault-pass"

# Update aliases for realiaser
alias > ~/.alias.cache